  <!DOCTYPE html>
  <html>

  <head>
    <meta charset="UTF-8">
    <title>A+ Coffee</title>
    <script src = "/socket.io/socket.io.js"></script>
    <script src = "jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap-grid.css">
    <link rel="stylesheet" href="css/bootstrap-grid.css.map">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css.map">
    <link rel="stylesheet" href="css/bootstrap-reboot.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.css.map">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css.map">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap.css.map">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css.map">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/jquery-ui.css">
    <link rel="stylesheet" href="css/main.css" media="screen" type="text/css">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style-portfolio.css">
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="favicon-1.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="js/bootstrap.js"> </script>
  </head>

  <body>
    <div class="navbar ">
      <div class="container hidden-xl-down hidden-xs-up">
        <div class="col-md-4 hidden-xl-down hidden-xs-up">
          <a class="navbar-brand" href="index.html" style="font-family:Playball" >A+ Coffee</a>
        </div>
        <div id="menu">
          <a id="welcome" href="index.html" style="font-family: Times New Roman, Times, serif; "onmouseover="style.color='black'"
  onmouseout="style.color='white'">WELCOME</a>
          <a id="new" href="#new-product" style="font-family: Times New Roman, Times, serif;" onmouseover="style.color='black'"
  onmouseout="style.color='white'">NEW PRODUCT</a>
          <a href="#" class="navactive" style="font-family: Times New Roman, Times, serif;" onmouseover="style.color='black'"
  onmouseout="style.color='white'">ORDER</a>
          <a href="#" style="font-family: Times New Roman, Times, serif;" onmouseover="style.color='black'"
  onmouseout="style.color='white'">SCHEDULE</a>
          <a href="#" style="font-family: Times New Roman, Times, serif;" onmouseover="style.color='black'"
  onmouseout="style.color='white'">PROFILE</a>
          <a href="#" style="font-family: Times New Roman, Times, serif;" onmouseover="style.color='black'"
  onmouseout="style.color='white'">LOG OUT</a>
          <button data-toggle="modal" data-target="#Order_detail">
            <span>
              <i class="fa fa-coffee" aria-hidden="true" style="color: white;font-size: 25px;"></i>
            </span>
          </a>

        </div>
      </div>
    </div>
    <div class="modal fade" id="Order_detail" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Order details</h4>
          </div>
          <div class="modal-body">
              <div class="container-fluid" style="text-align: center;">
                <div class="row">
                  <div class="col-md-1 center-margin">
                    <h6>TABLE</h6>
                  </div>
                  <div class="col-md-6 center-margin">
                    PRODUCT
                  </div>
                  <div class="col-md-2 center-margin">
                    <h6>NUMBER</h6>
                  </div>
                  <div class="col-md-2 center-margin">
                    <h6>PRICE</h6>
                  </div>
                  <div class="col-md-1 center-margin">
                    <br>
                  </div>
                </div>
                <div id="order_products">
                </div>

              </div>
          </div>
          <div class="modal-footer">
            <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
          </div>
        </div>

      </div>
    </div>
    <div class="main">
      <!-- ============ Menu Section  ============= -->
      <div class="menu">
        <div class="container-fluid" style="padding-left: 0;padding-right: 0;">
          <div class="row">
            <div class="col-md-3">
              <div class="tab">
                <button class="tablinks" onclick="openCity(event, 'Coffee')" id="defaultOpen">Coffee</button>
                <button class="tablinks" onclick="openCity(event, 'Cake')">Cake</button>
                <button class="tablinks" onclick="openCity(event, 'Other')">Other</button>
              </div>
            </div>
            <div class="col-md-9">
              <div id="Coffee" class="tabcontent">
                <!-- ============ Coffee Section  ============= -->
                <div id="coffee">
                  <div class="header-index" style="font-family: Times New Roman, Times, serif;">
                    Coffee
                  </div>
                  <div class="container-fluid">
                    <div class="row" list-group>
                      <% for(var i=0; i<products.length; i++) {%>
                        <div class="item  col-xs-4 col-lg-4">
                          <div class="thumbnail">
                              <img width="400" height="250"class="group list-group-image" src="<%= products[i].Url_images %> " alt="" />
                              <div class="caption">
                                  <h4 class="group inner list-group-item-heading" id="cafe01">
                                      <%= products[i].ProductName %></h4>
                                  <p class="group inner list-group-item-text">
                                    <%= products[i].Description %>
                                  </p>
                                  <div class="row">
                                      <div class="col-xs-12 col-md-6">
                                          <p class="lead">
                                              $<%= products[i].Price %></p>
                                      </div>


                                      <div class="col-xs-6 col-md-3">
                                          <a onclick="add(<%=i%>)"class="btn btn-success" >Add to cart</a>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>

                      <%}%>
                      <% if(i%3==0) { %>
                        <div class="clear sep__1"></div>
                        <%}%>
                    </div>
                    <button type="button" name="button" onclick="send()">Send order</button>
                  </div>

                </div>
              </div>

            </div>
          </div>
          <div class="clear">
          </div>

        </div>


      </div>

      <!-- ============ Footer Section  ============= -->
      <footer class="sub_footer">
        <div class="container">
          <div class="row">
            <div class="col-md-4"><p class="sub-footer-text text-center">&copy; A+ Coffee 2017, Theme by <a href="https://themewagon.com/">Team 9</a></p></div>
            <div class="col-md-4"><p class="sub-footer-text text-center">Back to <a href="#top">TOP</a></p></div>
            <div class="col-md-4"><p class="sub-footer-text text-center">Built With Care By <a href="#" target="_blank">Us</a></p></div>
          </div>
        </div>
      </footer>


    </div>


    <!-- ============ Script  ============= -->

    <script src="js/bootstrap.min.js" ></script>
    <script src="js/jquery-1.11.2.min.js"> </script>
    <script src="js/jquery.flexslider.min.js"></script>
    <script  src="js/jquery.hoverdir.js"></script>
    <script  src="js/jquery.mixitup.min.js" ></script>
    <script  src="js/jQuery.scrollSpeed.js"></script>
    <script src="js/jquery.validate.js"></script>
    <script  src="js/jssor.core.js"> </script>
    <script  src="js/jssor.slider.js"> </script>
    <script  src="js/jssor.utils.js"> </script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/script.js"></script>
    <!-- <script type="text/javascript" src="js/main.js" ></script> -->
    <script src="js/wow.min.js"></script>

    <script>
      order=[];
      html="";
      var socket = io("http://localhost:8000");
      socket.on('connect', function() {
        console.log('hello');
        socket.emit('name', {name: 'order'});
      })






      function add(i){
        var products = JSON.parse('<%-JSON.stringify(products)%>');

        var ProductID= products[i].ProductID;
        var ProductName= products[i].ProductName;
        var ProductUrl= products[i].Url_images;
        var ProductPrice=products[i].Price;
        // var number= parseInt(document.getElementById(ProductID).value);
        var number=1;
        product={
          ProductID: ProductID,
          number:number,
          ProductName:ProductName,
          ProductUrl:ProductUrl,
          ProductPrice:ProductPrice
        }
        console.log(order);
        if(order.length==0){
          order.push(product);
        }else{
          for(var j=0;j<order.length;++j){
            if(order[j].ProductID==ProductID){
              order[j].number+=number;
            }else{
              order.push(product);
            }
          }
        }
        for(var j=0;j<order.length;++j){
          html+=`<div class="row">
             <div class="col-md-1 center-margin">
               1
             </div>
             <div class="col-md-6 center-margin">` + order[j].ProductName +
             `</div>
             <div class="col-md-2 center-margin">` + order[j].number +
            `</div>
             <div class="col-md-2 center-margin">` + order[j].ProductPrice+
            `</div>
             <div class="col-md-1 center-margin">
               <br>
             </div>
           </div>`;
        }
        document.getElementById("order_products").innerHTML = html;
      };

      function send(){
        if(order.length!=0){
          console.log(order);
          socket.emit("id_ban",order);
          console.log("send thanh cong");
          order=[];
        }else {
          console.log("Order rỗng");
        }

      }
    </script>

    <script>
    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    // Get the element with id="defaultOpen" and click on it
    document.getElementById("defaultOpen").click();
    </script>

  </body>
  </html>
